/*! For license information please see groupfolders-node_modules_nextcloud_dialogs_dist_chunks_PublicAuthPrompt-ecDAsnUN_mjs-node_modules_nextclo-72c99b.js.LICENSE.txt */
"use strict";(self.webpackChunkgroupfolders=self.webpackChunkgroupfolders||[]).push([["node_modules_nextcloud_dialogs_dist_chunks_PublicAuthPrompt-ecDAsnUN_mjs-node_modules_nextclo-72c99b"],{3564:(t,e,n)=>{n.r(e),n.d(e,{default:()=>g});var a=n(5471),i=n(9097),r=n(1777),o=n(5168),s=n(4219),l=n(1133),u=n(2182),c=n(3095),d=n(5810);const m=(0,i.c0)("public").build(),p=(0,a.pM)({name:"PublicAuthPrompt",components:{NcDialog:s.A,NcNoteCard:l.A,NcTextField:u.A},props:{nickname:{type:String,default:""},title:{type:String,default:(0,c.t)("Guest identification")},text:{type:String,default:""},notice:{type:String,default:""},submitLabel:{type:String,default:(0,c.t)("Submit name")},cancellable:{type:Boolean,default:!1}},setup:()=>({t:c.t}),emits:["close"],data:()=>({name:""}),computed:{dialogButtons(){const t={label:(0,c.t)("Cancel"),variant:"tertiary",callback:()=>this.$emit("close")},e={label:this.submitLabel,type:"submit",variant:"primary"};return this.cancellable?[t,e]:[e]},defaultNotice(){return this.notice?this.notice:this.nickname?(0,c.t)("You are currently identified as {nickname}.",{nickname:this.nickname}):(0,c.t)("You are currently not identified.")}},watch:{nickname:{handler(){this.name=this.nickname},immediate:!0},name(){const t=this.name.trim?.()||"",e=this.$refs.input?.$el.querySelector("input");if(!e)return;const n=function(t){if(""===t.trim())return(0,c.t)("Names must not be empty.");if(t.startsWith("."))return(0,c.t)("Names must not start with a dot.");if(t.length>64)return(0,c.t)("Names may be at most 64 characters long.");try{return(0,d.KT)(t),""}catch(t){if(!(t instanceof d.di))throw t;switch(t.reason){case d.nF.Character:return(0,c.t)('"{char}" is not allowed inside a name.',{char:t.segment});case d.nF.ReservedName:return(0,c.t)('"{segment}" is a reserved name and not allowed.',{segment:t.segment});case d.nF.Extension:return t.segment.match(/\.[a-z]/i)?(0,c.t)('"{extension}" is not an allowed name.',{extension:t.segment}):(0,c.t)('Names must not end with "{extension}".',{extension:t.segment});default:return(0,c.t)("Invalid name.")}}}(t);e.setCustomValidity(n),e.reportValidity()}},methods:{onSubmit(){const t=this.$refs.input,e=this.name.trim();if(""===e)return t.setCustomValidity((0,c.t)("You cannot leave the name empty.")),t.reportValidity(),void t.focus();if(e.length<2)return t.setCustomValidity((0,c.t)("Please enter a name with at least 2 characters.")),t.reportValidity(),void t.focus();try{(0,r.L$)(e)}catch(e){return(0,o.Qg)((0,c.t)("Failed to set nickname.")),console.error("Failed to set nickname",e),void t.focus()}m.setItem("public-auth-prompt-shown","true"),this.$emit("close",this.name)}}});var h=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("NcDialog",{staticClass:"public-auth-prompt",attrs:{buttons:t.dialogButtons,"data-cy-public-auth-prompt-dialog":"","is-form":"","no-close":"",name:t.title},on:{submit:t.onSubmit}},[t.text?e("p",{staticClass:"public-auth-prompt__text"},[t._v(" "+t._s(t.text)+" ")]):t._e(),e("NcNoteCard",{staticClass:"public-auth-prompt__header",attrs:{text:t.defaultNotice,type:"info"}}),e("NcTextField",{ref:"input",staticClass:"public-auth-prompt__input",attrs:{"data-cy-public-auth-prompt-dialog-name":"",label:t.t("Name"),placeholder:t.t("Enter your name"),required:!t.cancellable,minlength:"2",maxlength:"64",name:"name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)},f=[];const g=(0,c.n)(p,h,f,!1,null,"414f7090").exports},5217:(t,e,n)=>{n.d(e,{N:()=>p});var a=n(8990),i=n(4589),r=n(9841),o=n(418),s=n(7833),l=n(1431);(0,o.r)(o.c,o.b);const u=new Set(Object.keys(i.N.props)),c={name:"NcTextField",components:{NcIconSvgWrapper:s.N,NcInputField:i.N},inheritAttrs:!1,model:{prop:"modelValue",event:"update:modelValue"},props:{" ":{},...i.N.props,trailingButtonLabel:{type:String,default:""},trailingButtonIcon:{type:String,default:"close",validator:t=>["close","arrowEnd","arrowRight","undo"].includes(t)}},emits:["update:value","update:modelValue","update:model-value"],setup:()=>({model:(0,r.u)("value","update:value"),mdiArrowRight:a.d,mdiClose:a.c,mdiUndo:a.b}),computed:{isArrow(){return"arrowEnd"===this.trailingButtonIcon||"arrowRight"===this.trailingButtonIcon},propsAndAttrsToForward(){const t={arrowEnd:(0,o.a)("Save changes"),arrowRight:(0,o.a)("Save changes"),close:(0,o.a)("Clear text"),undo:(0,o.a)("Undo changes")};return{...this.$attrs,...Object.fromEntries(Object.entries(this.$props).filter((([t])=>u.has(t)))),trailingButtonLabel:this.trailingButtonLabel||t[this.trailingButtonIcon]}}},methods:{focus(){this.$refs.inputField.focus()},select(){this.$refs.inputField.select()}}};var d=function(){var t=this,e=t._self._c;return e("NcInputField",t._g(t._b({ref:"inputField",scopedSlots:t._u([t.$scopedSlots.icon||t.$slots.default||t.$scopedSlots.default?{key:"icon",fn:function(){return[t._t("icon",(function(){return[t._t("default")]}))]},proxy:!0}:null,"search"!==t.type?{key:"trailing-button-icon",fn:function(){return[t.isArrow?e("NcIconSvgWrapper",{attrs:{directional:"",path:t.mdiArrowRight}}):e("NcIconSvgWrapper",{attrs:{path:"undo"===t.trailingButtonIcon?t.mdiUndo:t.mdiClose}})]},proxy:!0}:null],null,!0)},"NcInputField",t.propsAndAttrsToForward,!1),t.$listeners))},m=[];const p=(0,l.n)(c,d,m,!1,null,null).exports}}]);
//# sourceMappingURL=groupfolders-node_modules_nextcloud_dialogs_dist_chunks_PublicAuthPrompt-ecDAsnUN_mjs-node_modules_nextclo-72c99b.js.map?v=0a970c56cd2934b9b465