(self.webpackChunkusers_picker=self.webpackChunkusers_picker||[]).push([["image-picker-lazy"],{302:(e,i,n)=>{"use strict";n.d(i,{default:()=>$});var r=n(715),s=n(3814),o=n(7334),l=n.n(o),a=n(2784),c=n(3797),u=n(2190),p=n(6362);const f={name:"ArrowRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var d=n(4486);const h=(0,d.A)(f,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon arrow-right-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports,A={name:"ProfilesCustomPicker",components:{NcSelect:a.N,NcButton:c.A,NcEmptyContent:u.A,AccountOutline:p.A,ArrowRightIcon:h},props:{providerId:{type:String,required:!0},accessible:{type:Boolean,default:!1}},data:()=>({searchQuery:"",loading:!1,resultUrl:null,reference:null,profiles:[],selectedProfile:null,abortController:null}),computed:{options(){return""!==this.searchQuery?this.profiles:[]},noResultText(){return this.loading?t("users_picker","Searching â€¦"):t("users_picker","Not found")}},mounted(){this.focusOnInput()},methods:{focusOnInput(){this.$nextTick(()=>{this.$refs["profiles-search-input"].$el.getElementsByTagName("input")[0]?.focus()})},async searchForProfile(e){""===e.trim()||e.trim().length<3||(this.searchQuery=e.trim(),this.loading=!0,await this.debounceFindProfiles(e))},debounceFindProfiles:l()(function(...e){this.findProfiles(...e)},300),async findProfiles(e){const t=(0,s.KT)("core/autocomplete/get?search={searchQuery}&itemType=%20&itemId=%20&shareTypes[]=0&limit=20",{searchQuery:e});try{const e=await r.Ay.get(t);this.profiles=e.data.ocs.data.map(e=>({user:e.id,displayName:e.label,icon:e.icon,subtitle:e.subline,isNoUser:e.source.startsWith("users")}))}catch(e){console.error(e)}finally{this.loading=!1}},submit(){this.resultUrl=window.location.origin+(0,s.Jv)(`/u/${this.selectedProfile.user.trim().toLowerCase()}`,null,{noRewrite:!0}),this.$emit("submit",this.resultUrl)},resolveResult(e){this.loading=!0,this.abortController=new AbortController,this.selectedProfile=e,this.resultUrl=window.location.origin+(0,s.Jv)(`/u/${this.selectedProfile.user.trim().toLowerCase()}`,null,{noRewrite:!0});try{const e=r.Ay.get((0,s.KT)("references/resolve",2)+"?reference="+encodeURIComponent(this.resultUrl),{signal:this.abortController.signal});this.reference=e.data.ocs.data.references[this.resultUrl]}catch(e){console.error(e)}finally{this.loading=!1}},clearSelection(){this.selectedProfile=null,this.resultUrl=null,this.reference=null}}};var m=n(5072),g=n.n(m),C=n(7825),_=n.n(C),y=n(7659),v=n.n(y),k=n(5056),w=n.n(k),b=n(540),x=n.n(b),P=n(1113),S=n.n(P),T=n(5828),R={};R.styleTagTransform=S(),R.setAttributes=w(),R.insert=v().bind(null,"head"),R.domAPI=_(),R.insertStyleElement=x();g()(T.A,R);T.A&&T.A.locals&&T.A.locals;const $=(0,d.A)(A,function(){var e=this,t=e._self._c;return t("div",{staticClass:"profile-picker"},[t("div",{staticClass:"profile-picker__heading"},[t("h2",[e._v("\n\t\t\t"+e._s(e.t("users_picker","Profile picker"))+"\n\t\t")]),e._v(" "),t("div",{staticClass:"input-wrapper"},[t("NcSelect",{ref:"profiles-search-input",attrs:{"input-id":"profiles-search",loading:e.loading,filterable:!1,placeholder:e.t("users_picker","Search for a user profile"),"clear-search-on-blur":()=>!1,"user-select":!0,multiple:!1,options:e.options},on:{search:e.searchForProfile,"option:selecting":e.resolveResult},scopedSlots:e._u([{key:"no-options",fn:function({search:t}){return[e._v("\n\t\t\t\t\t"+e._s(t?e.noResultText:e.t("users_picker","Search for a user profile. Start typing"))+"\n\t\t\t\t")]}}]),model:{value:e.selectedProfile,callback:function(t){e.selectedProfile=t},expression:"selectedProfile"}})],1),e._v(" "),t("NcEmptyContent",{staticClass:"empty-content",scopedSlots:e._u([{key:"icon",fn:function(){return[t("AccountOutline",{attrs:{size:20}})]},proxy:!0}])})],1),e._v(" "),t("div",{staticClass:"profile-picker__footer"},[null!==e.selectedProfile?t("NcButton",{attrs:{type:"primary","aria-label":e.t("users_picker","Insert selected user profile link"),disabled:e.loading||null===e.selectedProfile},on:{click:e.submit},scopedSlots:e._u([{key:"icon",fn:function(){return[t("ArrowRightIcon")]},proxy:!0}],null,!1,1168934321)},[e._v("\n\t\t\t"+e._s(e.t("users_picker","Insert"))+"\n\t\t\t")]):e._e()],1)])},[],!1,null,"30f7aee4",null).exports},4486:(e,t,i)=>{"use strict";function n(e,t,i,n,r,s,o,l){var a,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),o?(a=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=a):r&&(a=l?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),a)if(c.functional){c._injectStyles=a;var u=c.render;c.render=function(e,t){return a.call(t),u(e,t)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,a):[a]}return{exports:e,options:c}}i.d(t,{A:()=>n})},5828:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var n=i(1354),r=i.n(n),s=i(6314),o=i.n(s)()(r());o.push([e.id,".profile-picker[data-v-30f7aee4]{width:100%;min-height:450px;display:flex;flex-direction:column;align-items:center;justify-content:space-between;padding:12px 16px 16px 16px}.profile-picker__heading[data-v-30f7aee4],.profile-picker .select[data-v-30f7aee4]{width:100%}.profile-picker__heading h2[data-v-30f7aee4],.profile-picker .select h2[data-v-30f7aee4]{text-align:center}.profile-picker__footer[data-v-30f7aee4]{width:100%;display:flex;align-items:center;justify-content:end;margin-top:12px}.profile-picker__footer>*[data-v-30f7aee4]{margin-left:4px}","",{version:3,sources:["webpack://./src/components/ProfilesCustomPicker.vue"],names:[],mappings:"AACA,iCACC,UAAA,CACA,gBAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,6BAAA,CACA,2BAAA,CAEA,mFACC,UAAA,CAEA,yFACC,iBAAA,CAIF,yCACC,UAAA,CACA,YAAA,CACA,kBAAA,CACA,mBAAA,CACA,eAAA,CAEA,2CACC,eAAA",sourcesContent:["\n.profile-picker {\n\twidth: 100%;\n\tmin-height: 450px;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 12px 16px 16px 16px;\n\n\t&__heading, .select {\n\t\twidth: 100%;\n\n\t\th2 {\n\t\t\ttext-align: center;\n\t\t}\n\t}\n\n\t&__footer {\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: end;\n\t\tmargin-top: 12px;\n\n\t\t> * {\n\t\t\tmargin-left: 4px;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const l=o},6362:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});const n={name:"AccountOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};const r=(0,i(4486).A)(n,function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon account-outline-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,6A2,2 0 0,0 10,8A2,2 0 0,0 12,10A2,2 0 0,0 14,8A2,2 0 0,0 12,6M12,13C14.67,13 20,14.33 20,17V20H4V17C4,14.33 9.33,13 12,13M12,14.9C9.03,14.9 5.9,16.36 5.9,17V18.1H18.1V17C18.1,16.36 14.97,14.9 12,14.9Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},[],!1,null,null,null).exports},7334:e=>{function t(e,t=100,i={}){if("function"!=typeof e)throw new TypeError(`Expected the first parameter to be a function, got \`${typeof e}\`.`);if(t<0)throw new RangeError("`wait` must not be negative.");const{immediate:n}="boolean"==typeof i?{immediate:i}:i;let r,s,o,l,a;function c(){const t=r,i=s;return r=void 0,s=void 0,a=e.apply(t,i),a}function u(){const e=Date.now()-l;e<t&&e>=0?o=setTimeout(u,t-e):(o=void 0,n||(a=c()))}const p=function(...e){if(r&&this!==r&&Object.getPrototypeOf(this)===Object.getPrototypeOf(r))throw new Error("Debounced method called with different contexts of the same prototype.");r=this,s=e,l=Date.now();const i=n&&!o;return o||(o=setTimeout(u,t)),i&&(a=c()),a};return Object.defineProperty(p,"isPending",{get:()=>void 0!==o}),p.clear=()=>{o&&(clearTimeout(o),o=void 0)},p.flush=()=>{o&&p.trigger()},p.trigger=()=>{a=c(),p.clear()},p}e.exports.debounce=t,e.exports=t}}]);
//# sourceMappingURL=users_picker-image-picker-lazy.js.map?v=33aff3ebb7238107df07