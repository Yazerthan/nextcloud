"use strict";(()=>{(self.webpackChunktalk=self.webpackChunktalk||[]).push([["node_modules_nextcloud_vue_dist_assets_NcInputField-DRt2ahWd_css-node_modules_nextcloud_dialo-f3a4d9"],{76574:(W,_,a)=>{a.r(_),a.d(_,{default:()=>C});var e=a(20641),r=a(50953),f=a(90033),E=a(21777),h=a(59097),b=a(94434),P=a(53166),y=a(79455),t=a(11741),m=a(35810),D=a(50240);/*!
 * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors
 * SPDX-License-Identifier: AGPL-3.0-or-later
 */function v(c){if(c.trim()==="")return(0,t.t)("Names must not be empty.");if(c.startsWith("."))return(0,t.t)("Names must not start with a dot.");if(c.length>64)return(0,t.t)("Names may be at most 64 characters long.");try{return(0,m.KT)(c),""}catch(o){if(!(o instanceof m.di))throw o;switch(o.reason){case m.nF.Character:return(0,t.t)('"{char}" is not allowed inside a name.',{char:o.segment});case m.nF.ReservedName:return(0,t.t)('"{segment}" is a reserved name and not allowed.',{segment:o.segment});case m.nF.Extension:return o.segment.match(/\.[a-z]/i)?(0,t.t)('"{extension}" is not an allowed name.',{extension:o.segment}):(0,t.t)('Names must not end with "{extension}".',{extension:o.segment});default:return(0,t.t)("Invalid name.")}}}const M={key:0,class:"public-auth-prompt__text"},O=(0,e.pM)({__name:"PublicAuthPrompt",props:{nickname:{default:""},title:{default:(0,t.t)("Guest identification")},text:{default:""},notice:{default:""},submitLabel:{default:(0,t.t)("Submit name")},cancellable:{type:Boolean}},emits:["close"],setup(c,{emit:o}){const i=c,p=o,n=(0,e.rk)("input"),g=(0,h.c0)("public").build(),s=(0,r.KR)(i.nickname);(0,e.wB)(()=>i.nickname,()=>{s.value=i.nickname}),(0,e.wB)(s,l=>{const u=v(l);if(!u){n.value.setCustomValidity(u),n.value.reportValidity(),n.value.focus();return}});const x=(0,e.EW)(()=>{const l={label:(0,t.t)("Cancel"),variant:"tertiary",callback:()=>p("close")},u={label:i.submitLabel,type:"submit",variant:"primary"};return i.cancellable?[l,u]:[u]}),R=(0,e.EW)(()=>i.notice?i.notice:s.value?(0,t.t)("You are currently identified as {nickname}.",{nickname:s.value}):(0,t.t)("You are currently not identified."));function B(){const l=s.value.trim(),u=v(l);if(u){n.value.setCustomValidity(u),n.value.reportValidity(),n.value.focus();return}if(l===""){n.value.setCustomValidity((0,t.t)("You cannot leave the name empty.")),n.value.reportValidity(),n.value.focus();return}if(l.length<2){n.value.setCustomValidity((0,t.t)("Please enter a name with at least 2 characters.")),n.value.reportValidity(),n.value.focus();return}try{(0,E.L$)(l)}catch(d){t.l.error("Failed to set nickname",{error:d}),(0,t.s)((0,t.t)("Failed to set nickname.")),n.value.focus();return}g.setItem("public-auth-prompt-shown","true"),p("close",s.value)}return(l,u)=>((0,e.uX)(),(0,e.Wv)((0,r.R1)(b.A),{buttons:x.value,class:"public-auth-prompt","data-cy-public-auth-prompt-dialog":"","is-form":"","no-close":"",name:l.title,onSubmit:B},{default:(0,e.k6)(()=>[l.text?((0,e.uX)(),(0,e.CE)("p",M,(0,f.v_)(l.text),1)):(0,e.Q3)("",!0),(0,e.bF)((0,r.R1)(P.A),{class:"public-auth-prompt__header",text:R.value,type:"info"},null,8,["text"]),(0,e.bF)((0,r.R1)(y.A),{ref:"input",modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=d=>s.value=d),class:"public-auth-prompt__input","data-cy-public-auth-prompt-dialog-name":"",label:(0,r.R1)(t.t)("Name"),placeholder:(0,r.R1)(t.t)("Enter your name"),required:!l.cancellable,minlength:"2",maxlength:"64",name:"name"},null,8,["modelValue","label","placeholder","required"])]),_:1},8,["buttons","name"]))}}),C=(0,D._)(O,[["__scopeId","data-v-b33d88e5"]])}}]);})();

//# sourceMappingURL=talk-node_modules_nextcloud_vue_dist_assets_NcInputField-DRt2ahWd_css-node_modules_nextcloud_dialo-f3a4d9.js.map?v=a0968900feb5cd1abd45