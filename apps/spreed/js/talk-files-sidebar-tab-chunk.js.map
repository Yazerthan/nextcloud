{"version":3,"file":"talk-files-sidebar-tab-chunk.js?v=cf50f65d2a0a03a6ce69","mappings":"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","sources":["webpack:///talk/src/views/FilesSidebarChatView.vue","webpack:///talk/src/components/PollViewer/PollDraftHandler.vue","webpack://talk/./src/components/PollViewer/PollDraftHandler.vue?708e","webpack:///talk/src/utils/validatePollForm.ts","webpack:///talk/src/components/PollViewer/PollEditor.vue","webpack://talk/./src/components/PollViewer/PollEditor.vue?0f3d","webpack://talk/./src/components/PollViewer/PollManager.vue?e585","webpack:///talk/src/components/PollViewer/PollManager.vue","webpack:///talk/src/components/RightSidebar/InternalSignalingHint.vue","webpack://talk/./src/components/RightSidebar/InternalSignalingHint.vue?7e08","webpack://talk/./src/views/FilesSidebarChatView.vue?e4e8"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"talk-tab__wrapper\" }\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_InternalSignalingHint = _resolveComponent(\"InternalSignalingHint\")\n  const _component_CallButton = _resolveComponent(\"CallButton\")\n  const _component_CallFailedDialog = _resolveComponent(\"CallFailedDialog\")\n  const _component_RouterView = _resolveComponent(\"RouterView\")\n  const _component_PollManager = _resolveComponent(\"PollManager\")\n  const _component_PollViewer = _resolveComponent(\"PollViewer\")\n  const _component_MediaSettings = _resolveComponent(\"MediaSettings\")\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_InternalSignalingHint),\n    (!$setup.isInCall)\n      ? (_openBlock(), _createBlock(_component_CallButton, {\n          key: 0,\n          class: \"talk-tab__call-button\"\n        }))\n      : _createCommentVNode(\"\", true),\n    ($options.connectionFailed)\n      ? (_openBlock(), _createBlock(_component_CallFailedDialog, {\n          key: 1,\n          token: $setup.token\n        }, null, 8, [\"token\"]))\n      : _createCommentVNode(\"\", true),\n    _createVNode(_component_RouterView, { class: \"talk-tab__chat-view\" }),\n    _createVNode(_component_PollManager),\n    _createVNode(_component_PollViewer),\n    _createVNode(_component_MediaSettings, {\n      \"recording-consent-given\": $data.recordingConsentGiven,\n      \"onUpdate:recordingConsentGiven\": _cache[0] || (_cache[0] = $event => (($data.recordingConsentGiven) = $event))\n    }, null, 8, [\"recording-consent-given\"])\n  ]))\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createVNode as _createVNode, createSlots as _createSlots } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 1,\n  class: \"drafts__wrapper\"\n}\n\nimport { t } from '@nextcloud/l10n'\nimport { computed } from 'vue'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport NcDialog from '@nextcloud/vue/components/NcDialog'\nimport NcLoadingIcon from '@nextcloud/vue/components/NcLoadingIcon'\nimport IconPoll from 'vue-material-design-icons/Poll.vue'\nimport EmptyView from '../EmptyView.vue'\nimport Poll from '../MessagesList/MessagesGroup/Message/MessagePart/Poll.vue'\nimport { EventBus } from '../../services/EventBus.ts'\nimport { usePollsStore } from '../../stores/polls.ts'\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PollDraftHandler',\n  props: {\n    token: {},\n    editorOpened: { type: Boolean },\n    container: {}\n  },\n  emits: [\"close\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst props = __props\nconst emit = __emit\n\nconst pollsStore = usePollsStore()\n/**\n * Receive poll drafts for the current conversation as owner/moderator\n */\npollsStore.getPollDrafts(props.token)\nconst pollDrafts = computed(() => pollsStore.getDrafts(props.token))\nconst pollDraftsLoaded = computed(() => pollsStore.draftsLoaded(props.token))\n\n/**\n * Opens poll editor pre-filled from the draft\n *\n * @param payload method payload\n * @param payload.id poll draft ID\n * @param payload.action required action ('fill' from draft or 'edit' draft)\n */\nfunction openPollEditor({ id, action }: { id: number | null, action?: string }) {\n\tEventBus.emit('poll-editor-open', { token: props.token, id, fromDrafts: !props.editorOpened, action, selector: props.container })\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(NcDialog), {\n    class: \"drafts\",\n    name: _unref(t)('spreed', 'Poll drafts'),\n    container: __props.container,\n    size: \"normal\",\n    \"close-on-click-outside\": \"\",\n    \"onUpdate:open\": _cache[1] || (_cache[1] = ($event: any) => (emit('close')))\n  }, _createSlots({\n    default: _withCtx(() => [\n      (!pollDrafts.value.length)\n        ? (_openBlock(), _createBlock(EmptyView, {\n            key: 0,\n            class: \"drafts__empty\",\n            name: pollDraftsLoaded.value ? _unref(t)('spreed', 'No poll drafts') : _unref(t)('spreed', 'Loading …'),\n            description: pollDraftsLoaded.value ? _unref(t)('spreed', 'There is no poll drafts yet saved for this conversation') : ''\n          }, {\n            icon: _withCtx(() => [\n              (pollDraftsLoaded.value)\n                ? (_openBlock(), _createBlock(IconPoll, { key: 0 }))\n                : (_openBlock(), _createBlock(_unref(NcLoadingIcon), { key: 1 }))\n            ]),\n            _: 1\n          }, 8, [\"name\", \"description\"]))\n        : (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(pollDrafts.value, (item) => {\n              return (_openBlock(), _createBlock(Poll, {\n                id: item.id.toString(),\n                key: item.id,\n                token: __props.token,\n                name: item.question,\n                draft: \"\",\n                onClick: openPollEditor\n              }, null, 8, [\"id\", \"token\", \"name\"]))\n            }), 128))\n          ]))\n    ]),\n    _: 2\n  }, [\n    (!props.editorOpened)\n      ? {\n          name: \"actions\",\n          fn: _withCtx(() => [\n            _createVNode(_unref(NcButton), {\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (openPollEditor({ id: null, action: 'fill' })))\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(_toDisplayString(_unref(t)('spreed', 'Create new poll')), 1)\n              ]),\n              _: 1\n            })\n          ]),\n          key: \"0\"\n        }\n      : undefined\n  ]), 1032, [\"name\", \"container\"]))\n}\n}\n\n})","import script from \"./PollDraftHandler.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PollDraftHandler.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PollDraftHandler.vue?vue&type=style&index=0&id=31e48ae8&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-31e48ae8\"]])\n\nexport default __exports__","/**\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport type { requiredPollParams } from '../types/index.ts'\n\nconst REQUIRED_KEYS = ['question', 'options', 'resultMode', 'maxVotes'] as const\n\n/**\n * Type guard for options array\n *\n * @param payload payload to check\n */\nfunction isStringArray(payload: unknown): payload is string[] {\n\treturn Array.isArray(payload) && payload.every((opt) => typeof opt === 'string')\n}\n\n/**\n * Parses a given JSON object and validates with required poll form object.\n * Throws an error if parsed object doesn't match\n *\n * @param jsonObject The object to validate\n */\nfunction validatePollForm(jsonObject: unknown): requiredPollParams {\n\tif (typeof jsonObject !== 'object' || !jsonObject) {\n\t\tthrow new Error('Invalid parsed object')\n\t}\n\n\tconst typedObject = jsonObject as Record<keyof requiredPollParams, unknown>\n\n\tfor (const key of REQUIRED_KEYS) {\n\t\tif (typedObject[key] === undefined) {\n\t\t\tthrow new Error('Missing required key')\n\t\t}\n\t}\n\n\tif (typeof typedObject.question !== 'string') {\n\t\tthrow new Error('Invalid parsed value: question')\n\t}\n\n\tif (typeof typedObject.resultMode !== 'number' || !(typedObject.resultMode === 0 || typedObject.resultMode === 1)) {\n\t\tthrow new Error('Invalid parsed value: resultMode')\n\t}\n\n\tif (typeof typedObject.maxVotes !== 'number') {\n\t\tthrow new Error('Invalid parsed value: maxVotes')\n\t}\n\n\tif (!isStringArray(typedObject.options)) {\n\t\tthrow new Error('Invalid parsed value: options')\n\t}\n\n\treturn {\n\t\tquestion: typedObject.question,\n\t\toptions: [...typedObject.options],\n\t\tresultMode: typedObject.resultMode,\n\t\tmaxVotes: typedObject.maxVotes,\n\t}\n}\n\nexport {\n\tvalidatePollForm,\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"poll-editor__caption\" }\nconst _hoisted_2 = { class: \"poll-editor__wrapper\" }\nconst _hoisted_3 = { class: \"poll-editor__caption\" }\nconst _hoisted_4 = { class: \"poll-editor__caption\" }\nconst _hoisted_5 = { class: \"poll-editor__settings\" }\n\nimport type { createPollParams, requiredPollParams } from '../../types/index.ts'\n\nimport { showError } from '@nextcloud/dialogs'\nimport { t } from '@nextcloud/l10n'\nimport { computed, nextTick, reactive, ref, useTemplateRef } from 'vue'\nimport { useStore } from 'vuex'\nimport NcActionButton from '@nextcloud/vue/components/NcActionButton'\nimport NcActionLink from '@nextcloud/vue/components/NcActionLink'\nimport NcActions from '@nextcloud/vue/components/NcActions'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/components/NcCheckboxRadioSwitch'\nimport NcDialog from '@nextcloud/vue/components/NcDialog'\nimport NcIconSvgWrapper from '@nextcloud/vue/components/NcIconSvgWrapper'\nimport NcTextField from '@nextcloud/vue/components/NcTextField'\nimport IconArrowLeft from 'vue-material-design-icons/ArrowLeft.vue'\nimport Close from 'vue-material-design-icons/Close.vue'\nimport IconFileEditOutline from 'vue-material-design-icons/FileEditOutline.vue'\nimport Plus from 'vue-material-design-icons/Plus.vue'\nimport IconFileDownload from '../../../img/material-icons/file-download.svg?raw'\nimport IconFileUpload from '../../../img/material-icons/file-upload.svg?raw'\nimport { useGetThreadId } from '../../composables/useGetThreadId.ts'\nimport { useGetToken } from '../../composables/useGetToken.ts'\nimport { POLL } from '../../constants.ts'\nimport { hasTalkFeature } from '../../services/CapabilitiesManager.ts'\nimport { EventBus } from '../../services/EventBus.ts'\nimport { usePollsStore } from '../../stores/polls.ts'\nimport { convertToJSONDataURI } from '../../utils/fileDownload.ts'\nimport { validatePollForm } from '../../utils/validatePollForm.ts'\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PollEditor',\n  props: {\n    token: {},\n    canCreatePollDrafts: { type: Boolean },\n    container: {}\n  },\n  emits: [\"close\"],\n  setup(__props: any, { expose: __expose, emit: __emit }) {\n\nconst props = __props\nconst emit = __emit\n__expose({\n\tfillPollEditorFromDraft,\n})\n\nconst supportPollDrafts = hasTalkFeature(props.token, 'talk-polls-drafts')\n\nconst store = useStore()\nconst pollsStore = usePollsStore()\nconst currentConversationToken = useGetToken()\nconst threadId = useGetThreadId()\n\nconst isOpenedFromDraft = ref(false)\nconst editingDraftId = ref<number | null>(null)\nconst pollOption = useTemplateRef<InstanceType<typeof NcTextField>[]>('pollOption')\nconst pollImport = ref<HTMLInputElement | null>(null)\n\nconst pollForm = reactive<createPollParams>({\n\tquestion: '',\n\toptions: ['', ''],\n\tresultMode: POLL.MODE.PUBLIC,\n\tmaxVotes: POLL.ANSWER_TYPE.SINGLE,\n})\n\nconst isFilled = computed(() => Boolean(pollForm.question) && pollForm.options.filter((option) => Boolean(option)).length >= 2)\nconst dialogName = computed(() => {\n\treturn editingDraftId.value ? t('spreed', 'Edit poll draft') : t('spreed', 'Create new poll')\n})\nconst createPollLabel = computed(() => {\n\tif (editingDraftId.value) {\n\t\treturn t('spreed', 'Save')\n\t}\n\n\treturn currentConversationToken.value !== props.token\n\t\t? t('spreed', 'Create poll in {name}', { name: store.getters.conversation(props.token)?.displayName ?? '' }, undefined, { escape: false, sanitize: false })\n\t\t: t('spreed', 'Create poll')\n})\n\nconst isAnonymous = computed({\n\tget() {\n\t\treturn pollForm.resultMode === POLL.MODE.HIDDEN\n\t},\n\tset(value) {\n\t\tpollForm.resultMode = value ? POLL.MODE.HIDDEN : POLL.MODE.PUBLIC\n\t},\n})\n\nconst isMultipleAnswer = computed({\n\tget() {\n\t\treturn pollForm.maxVotes === POLL.ANSWER_TYPE.MULTIPLE\n\t},\n\tset(value) {\n\t\tpollForm.maxVotes = value ? POLL.ANSWER_TYPE.MULTIPLE : POLL.ANSWER_TYPE.SINGLE\n\t},\n})\n\nconst exportPollURI = computed(() => convertToJSONDataURI(pollForm))\nconst exportPollFileName = `Talk Poll ${new Date().toISOString().slice(0, 10)}`\n\n/**\n * Remove a previously added option\n *\n * @param index option index\n */\nfunction deleteOption(index: number) {\n\tpollForm.options.splice(index, 1)\n}\n\n/**\n * Add an empty option to the form\n */\nfunction addOption() {\n\tpollForm.options.push('')\n\tnextTick(() => {\n\t\tpollOption.value!.at(-1)!.focus()\n\t})\n}\n\n/**\n * Post a poll into conversation\n */\nasync function handleSubmit() {\n\tif (editingDraftId.value) {\n\t\tconst pollDraft = await pollsStore.updatePollDraft({\n\t\t\ttoken: props.token,\n\t\t\tpollId: editingDraftId.value,\n\t\t\tform: pollForm,\n\t\t})\n\t\tif (pollDraft) {\n\t\t\topenPollDraftHandler()\n\t\t\tnextTick(() => {\n\t\t\t\temit('close')\n\t\t\t})\n\t\t}\n\t\treturn\n\t}\n\n\tconst poll = await pollsStore.createPoll({\n\t\ttoken: props.token,\n\t\tthreadId: threadId.value ? threadId.value : undefined,\n\t\tform: pollForm,\n\t})\n\tif (poll) {\n\t\temit('close')\n\t}\n}\n\n/**\n * Pre-fills form from the draft\n *\n * @param id poll draft ID\n * @param fromDrafts whether editor was opened from drafts handler\n * @param action required action ('fill' from draft or 'edit' draft)\n */\nfunction fillPollEditorFromDraft(id: number | null, fromDrafts: boolean, action?: string) {\n\tif (fromDrafts) {\n\t\t// Show 'Back' button, do not reset until closed\n\t\tisOpenedFromDraft.value = true\n\t}\n\tif (action === 'edit') {\n\t\t// Show Edit interface\n\t\teditingDraftId.value = id\n\t}\n\n\tif (id === null) {\n\t\treturn\n\t}\n\n\tconst draft = pollsStore.drafts[props.token][id]\n\tif (draft) {\n\t\tfillPollForm({\n\t\t\tquestion: draft.question,\n\t\t\toptions: [...draft.options],\n\t\t\tresultMode: draft.resultMode,\n\t\t\tmaxVotes: draft.maxVotes,\n\t\t})\n\t}\n}\n\n/**\n * Call native input[type='file'] to import a file\n */\nfunction triggerImport() {\n\tpollImport.value!.click()\n}\n\n/**\n * Validate imported file and insert data into form fields\n *\n * @param event import event\n */\nfunction importPoll(event: Event) {\n\tconst file = (event.target as HTMLInputElement).files?.[0]\n\tif (!file) {\n\t\treturn\n\t}\n\n\tconst reader = new FileReader()\n\treader.onload = (e: ProgressEvent) => {\n\t\ttry {\n\t\t\tconst parsedObject = validatePollForm(JSON.parse((e.target as FileReader).result as string))\n\t\t\tfillPollForm(parsedObject)\n\t\t} catch (error) {\n\t\t\tshowError(t('spreed', 'Error while importing poll'))\n\t\t\tconsole.error('Error while importing poll:', error)\n\t\t}\n\t}\n\n\treader.readAsText(file)\n}\n\n/**\n * Insert data into form fields\n *\n * @param payload data to fill with\n */\nfunction fillPollForm(payload: requiredPollParams) {\n\tObject.assign(pollForm, payload)\n}\n\n/**\n * Saves a poll draft for this conversation\n */\nasync function createPollDraft() {\n\tawait pollsStore.createPollDraft({\n\t\ttoken: props.token,\n\t\tform: pollForm,\n\t})\n}\n\n/**\n * Open a PollDraftHandler dialog\n */\nfunction openPollDraftHandler() {\n\tEventBus.emit('poll-drafts-open', { token: props.token, selector: props.container })\n}\n\n/**\n * Open a PollDraftHandler dialog as Back action\n */\nfunction goBack() {\n\topenPollDraftHandler()\n\tif (isOpenedFromDraft.value) {\n\t\tnextTick(() => {\n\t\t\temit('close')\n\t\t})\n\t}\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(NcDialog), {\n    name: dialogName.value,\n    \"close-on-click-outside\": !isFilled.value,\n    container: __props.container,\n    \"onUpdate:open\": _cache[3] || (_cache[3] = ($event: any) => (emit('close')))\n  }, {\n    actions: _withCtx(() => [\n      (_unref(supportPollDrafts))\n        ? (_openBlock(), _createBlock(_unref(NcActions), {\n            key: 0,\n            \"force-menu\": \"\"\n          }, {\n            default: _withCtx(() => [\n              (props.canCreatePollDrafts && !editingDraftId.value)\n                ? (_openBlock(), _createBlock(_unref(NcActionButton), {\n                    key: 0,\n                    disabled: !isFilled.value,\n                    onClick: createPollDraft\n                  }, {\n                    icon: _withCtx(() => [\n                      _createVNode(IconFileEditOutline, { size: 20 })\n                    ]),\n                    default: _withCtx(() => [\n                      _createTextVNode(\" \" + _toDisplayString(_unref(t)('spreed', 'Save as draft')), 1)\n                    ]),\n                    _: 1\n                  }, 8, [\"disabled\"]))\n                : _createCommentVNode(\"\", true),\n              (isFilled.value)\n                ? (_openBlock(), _createBlock(_unref(NcActionLink), {\n                    key: 1,\n                    href: exportPollURI.value,\n                    download: exportPollFileName\n                  }, {\n                    icon: _withCtx(() => [\n                      _createVNode(_unref(NcIconSvgWrapper), {\n                        svg: _unref(IconFileDownload),\n                        size: 20\n                      }, null, 8, [\"svg\"])\n                    ]),\n                    default: _withCtx(() => [\n                      _createTextVNode(\" \" + _toDisplayString(_unref(t)('spreed', 'Export draft to file')), 1)\n                    ]),\n                    _: 1\n                  }, 8, [\"href\"]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          }))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_unref(NcButton), {\n        variant: \"primary\",\n        disabled: !isFilled.value,\n        onClick: handleSubmit\n      }, {\n        default: _withCtx(() => [\n          _createTextVNode(_toDisplayString(createPollLabel.value), 1)\n        ]),\n        _: 1\n      }, 8, [\"disabled\"])\n    ]),\n    default: _withCtx(() => [\n      (_unref(supportPollDrafts) && isOpenedFromDraft.value)\n        ? (_openBlock(), _createBlock(_unref(NcButton), {\n            key: 0,\n            class: \"poll-editor__back-button\",\n            variant: \"tertiary\",\n            title: _unref(t)('spreed', 'Back'),\n            \"aria-label\": _unref(t)('spreed', 'Back'),\n            onClick: goBack\n          }, {\n            icon: _withCtx(() => [\n              _createVNode(IconArrowLeft, {\n                class: \"bidirectional-icon\",\n                size: 20\n              })\n            ]),\n            _: 1\n          }, 8, [\"title\", \"aria-label\"]))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"p\", _hoisted_1, _toDisplayString(_unref(t)('spreed', 'Question')), 1),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_unref(NcTextField), {\n          modelValue: pollForm.question,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((pollForm.question) = $event)),\n          label: _unref(t)('spreed', 'Ask a question')\n        }, null, 8, [\"modelValue\", \"label\"]),\n        _createElementVNode(\"input\", {\n          id: \"poll-upload\",\n          ref_key: \"pollImport\",\n          ref: pollImport,\n          type: \"file\",\n          class: \"hidden-visually\",\n          onChange: importPoll\n        }, null, 544),\n        (_unref(supportPollDrafts))\n          ? (_openBlock(), _createBlock(_unref(NcActions), {\n              key: 0,\n              \"force-menu\": \"\"\n            }, {\n              default: _withCtx(() => [\n                (props.canCreatePollDrafts && !isOpenedFromDraft.value)\n                  ? (_openBlock(), _createBlock(_unref(NcActionButton), {\n                      key: 0,\n                      \"close-after-click\": \"\",\n                      onClick: openPollDraftHandler\n                    }, {\n                      icon: _withCtx(() => [\n                        _createVNode(IconFileEditOutline, { size: 20 })\n                      ]),\n                      default: _withCtx(() => [\n                        _createTextVNode(\" \" + _toDisplayString(_unref(t)('spreed', 'Browse poll drafts')), 1)\n                      ]),\n                      _: 1\n                    }))\n                  : _createCommentVNode(\"\", true),\n                _createVNode(_unref(NcActionButton), {\n                  \"close-after-click\": \"\",\n                  onClick: triggerImport\n                }, {\n                  icon: _withCtx(() => [\n                    _createVNode(_unref(NcIconSvgWrapper), {\n                      svg: _unref(IconFileUpload),\n                      size: 20\n                    }, null, 8, [\"svg\"])\n                  ]),\n                  default: _withCtx(() => [\n                    _createTextVNode(\" \" + _toDisplayString(_unref(t)('spreed', 'Import draft from file')), 1)\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"p\", _hoisted_3, _toDisplayString(_unref(t)('spreed', 'Answers')), 1),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(pollForm.options, (option, index) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: index,\n          class: \"poll-editor__option\"\n        }, [\n          _createVNode(_unref(NcTextField), {\n            ref_for: true,\n            ref_key: \"pollOption\",\n            ref: pollOption,\n            modelValue: pollForm.options[index],\n            \"onUpdate:modelValue\": ($event: any) => ((pollForm.options[index]) = $event),\n            label: _unref(t)('spreed', 'Answer {option}', { option: index + 1 })\n          }, null, 8, [\"modelValue\", \"onUpdate:modelValue\", \"label\"]),\n          (pollForm.options.length > 2)\n            ? (_openBlock(), _createBlock(_unref(NcButton), {\n                key: 0,\n                variant: \"tertiary\",\n                \"aria-label\": _unref(t)('spreed', 'Delete poll option'),\n                onClick: ($event: any) => (deleteOption(index))\n              }, {\n                icon: _withCtx(() => [\n                  _createVNode(Close, { size: 20 })\n                ]),\n                _: 1\n              }, 8, [\"aria-label\", \"onClick\"]))\n            : _createCommentVNode(\"\", true)\n        ]))\n      }), 128)),\n      _createVNode(_unref(NcButton), {\n        class: \"poll-editor__add-more\",\n        variant: \"tertiary\",\n        onClick: addOption\n      }, {\n        icon: _withCtx(() => [\n          _createVNode(Plus)\n        ]),\n        default: _withCtx(() => [\n          _createTextVNode(\" \" + _toDisplayString(_unref(t)('spreed', 'Add answer')), 1)\n        ]),\n        _: 1\n      }),\n      _createElementVNode(\"p\", _hoisted_4, _toDisplayString(_unref(t)('spreed', 'Settings')), 1),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createVNode(_unref(NcCheckboxRadioSwitch), {\n          modelValue: isAnonymous.value,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((isAnonymous).value = $event)),\n          type: \"checkbox\"\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(_toDisplayString(_unref(t)('spreed', 'Anonymous poll')), 1)\n          ]),\n          _: 1\n        }, 8, [\"modelValue\"]),\n        _createVNode(_unref(NcCheckboxRadioSwitch), {\n          modelValue: isMultipleAnswer.value,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((isMultipleAnswer).value = $event)),\n          type: \"checkbox\"\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(_toDisplayString(_unref(t)('spreed', 'Multiple answers')), 1)\n          ]),\n          _: 1\n        }, 8, [\"modelValue\"])\n      ])\n    ]),\n    _: 1\n  }, 8, [\"name\", \"close-on-click-outside\", \"container\"]))\n}\n}\n\n})","import script from \"./PollEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PollEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PollEditor.vue?vue&type=style&index=0&id=6ff4bdf8&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6ff4bdf8\"]])\n\nexport default __exports__","import script from \"./PollManager.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PollManager.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\"\n\nimport type { Events } from '../../services/EventBus.ts'\n\nimport { computed, nextTick, onBeforeUnmount, onMounted, ref } from 'vue'\nimport { useStore } from 'vuex'\nimport PollDraftHandler from './PollDraftHandler.vue'\nimport PollEditor from './PollEditor.vue'\nimport { CONVERSATION, PARTICIPANT } from '../../constants.ts'\nimport { hasTalkFeature } from '../../services/CapabilitiesManager.ts'\nimport { EventBus } from '../../services/EventBus.ts'\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PollManager',\n  setup(__props) {\n\nconst store = useStore()\n\nconst pollEditorRef = ref<InstanceType<typeof PollEditor> | null>(null)\n\nconst showPollEditor = ref(false)\nconst showPollDraftHandler = ref(false)\nconst container = ref<string | undefined>(undefined)\n\nconst token = ref('')\nconst canCreatePollDrafts = computed(() => {\n\tconst { participantType, type } = store.getters.conversation(token.value) ?? {}\n\t// TODO: getters.isModerator should accept token\n\treturn hasTalkFeature(token.value, 'talk-polls-drafts')\n\t\t&& ([PARTICIPANT.TYPE.OWNER, PARTICIPANT.TYPE.MODERATOR, PARTICIPANT.TYPE.GUEST_MODERATOR].includes(participantType))\n\t\t&& ([CONVERSATION.TYPE.GROUP, CONVERSATION.TYPE.PUBLIC].includes(type))\n})\n\nonMounted(() => {\n\tEventBus.on('poll-editor-open', openPollEditor)\n\tEventBus.on('poll-drafts-open', openPollDraftHandler)\n})\n\nonBeforeUnmount(() => {\n\tEventBus.off('poll-editor-open', openPollEditor)\n\tEventBus.off('poll-drafts-open', openPollDraftHandler)\n})\n\n/**\n * Opens PollDraftHandler dialog\n *\n * @param payload event payload\n * @param payload.token conversation token\n * @param [payload.selector] selector to mount dialog to (body by default)\n */\nfunction openPollDraftHandler(payload: Events['poll-drafts-open']) {\n\ttoken.value = payload.token\n\tcontainer.value = payload.selector\n\tshowPollDraftHandler.value = true\n}\n\n/**\n * Opens PollEditor dialog\n *\n * @param payload event payload\n * @param payload.token conversation token\n * @param payload.id poll draft ID to fill form with (null for empty form)\n * @param payload.fromDrafts whether editor was opened from PollDraftHandler dialog\n * @param payload.action required action ('fill' from draft or 'edit' draft)\n * @param [payload.selector] selector to mount dialog to (body by default)\n */\nfunction openPollEditor(payload: Events['poll-editor-open']) {\n\ttoken.value = payload.token\n\tcontainer.value = payload.selector\n\tshowPollEditor.value = true\n\tnextTick(() => {\n\t\tpollEditorRef.value?.fillPollEditorFromDraft(payload.id, payload.fromDrafts, payload.action)\n\t\t// Wait for editor to be mounted and filled before unmounting drafts dialog to avoid issues when inserting nodes\n\t\tshowPollDraftHandler.value = false\n\t})\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    (showPollEditor.value)\n      ? (_openBlock(), _createBlock(PollEditor, {\n          key: 0,\n          ref_key: \"pollEditorRef\",\n          ref: pollEditorRef,\n          token: token.value,\n          \"can-create-poll-drafts\": canCreatePollDrafts.value,\n          container: container.value,\n          onClose: _cache[0] || (_cache[0] = ($event: any) => (showPollEditor.value = false))\n        }, null, 8, [\"token\", \"can-create-poll-drafts\", \"container\"]))\n      : _createCommentVNode(\"\", true),\n    (canCreatePollDrafts.value && showPollDraftHandler.value)\n      ? (_openBlock(), _createBlock(PollDraftHandler, {\n          key: 1,\n          token: token.value,\n          container: container.value,\n          \"editor-opened\": showPollEditor.value,\n          onClose: _cache[1] || (_cache[1] = ($event: any) => (showPollDraftHandler.value = false))\n        }, null, 8, [\"token\", \"container\", \"editor-opened\"]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, vShow as _vShow, withCtx as _withCtx, withDirectives as _withDirectives, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = [\"innerHTML\"]\n\nimport { t } from '@nextcloud/l10n'\nimport { computed, onBeforeUnmount, onMounted, ref, watch } from 'vue'\nimport { useStore } from 'vuex'\nimport NcNoteCard from '@nextcloud/vue/components/NcNoteCard'\nimport IconNetworkStrength2Alert from 'vue-material-design-icons/NetworkStrength2Alert.vue'\nimport { useGetToken } from '../../composables/useGetToken.ts'\nimport { useIsInCall } from '../../composables/useIsInCall.js'\nimport { CONVERSATION } from '../../constants.ts'\nimport { EventBus } from '../../services/EventBus.ts'\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'InternalSignalingHint',\n  setup(__props) {\n\nconst store = useStore()\nconst isInCall = useIsInCall()\nconst token = useGetToken()\n\nconst isGroupConversation = computed(() => {\n\treturn [CONVERSATION.TYPE.GROUP, CONVERSATION.TYPE.PUBLIC].includes(store.getters.conversation(token.value)?.type)\n})\nconst show = ref(false)\n\nconst warningDescription = t('spreed', 'Calls without High-performance backend can cause connectivity issues and high load on devices. {linkstart}Learn more{linkend}')\n\t.replace('{linkstart}', '<a target=\"_blank\" rel=\"noreferrer nofollow\" class=\"external\" href=\"https://portal.nextcloud.com/article/Nextcloud-Talk/High-Performance-Backend/Installation-of-Nextcloud-Talk-High-Performance-Backend\">')\n\t.replace('{linkend}', ' ↗</a>')\n\nconst warningTitle = t('spreed', 'Talk setup incomplete')\n\nonMounted(() => {\n\tEventBus.on('signaling-internal-show-warning', showInternalWarning)\n})\n\nonBeforeUnmount(() => {\n\tEventBus.on('signaling-internal-show-warning', showInternalWarning)\n})\n\nwatch(isInCall, (value) => {\n\tif (!value) {\n\t\tshow.value = false\n\t}\n})\n\n/**\n *\n */\nfunction showInternalWarning() {\n\tif (isGroupConversation.value) {\n\t\tshow.value = true\n\t}\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return _withDirectives((_openBlock(), _createBlock(_unref(NcNoteCard), {\n    type: \"warning\",\n    class: \"internal-warning\"\n  }, {\n    icon: _withCtx(() => [\n      _createVNode(IconNetworkStrength2Alert, {\n        \"fill-color\": \"var(--color-warning-text)\",\n        size: 20\n      })\n    ]),\n    default: _withCtx(() => [\n      _createElementVNode(\"strong\", null, _toDisplayString(_unref(warningTitle)), 1),\n      _createElementVNode(\"p\", { innerHTML: _unref(warningDescription) }, null, 8, _hoisted_1)\n    ]),\n    _: 1\n  }, 512)), [\n    [_vShow, show.value]\n  ])\n}\n}\n\n})","import script from \"./InternalSignalingHint.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./InternalSignalingHint.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./InternalSignalingHint.vue?vue&type=style&index=0&id=ef3773e0&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ef3773e0\"]])\n\nexport default __exports__","import { render } from \"./FilesSidebarChatView.vue?vue&type=template&id=756108a4&scoped=true\"\nimport script from \"./FilesSidebarChatView.vue?vue&type=script&lang=js\"\nexport * from \"./FilesSidebarChatView.vue?vue&type=script&lang=js\"\n\nimport \"./FilesSidebarChatView.vue?vue&type=style&index=0&id=756108a4&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-756108a4\"]])\n\nexport default __exports__"],"names":["_hoisted_1","render","_ctx","_cache","$props","$setup","$data","$options","_component_InternalSignalingHint","_component_CallButton","_component_CallFailedDialog","_component_RouterView","_component_PollManager","_component_PollViewer","_component_MediaSettings","$event","__props","__emit","props","emit","pollsStore","pollDrafts","pollDraftsLoaded","openPollEditor","id","action","EventBus","NcDialog","item","EmptyView","NcLoadingIcon","NcButton","REQUIRED_KEYS","isStringArray","payload","opt","validatePollForm","jsonObject","typedObject","key","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","__expose","fillPollEditorFromDraft","supportPollDrafts","store","currentConversationToken","useGetToken","threadId","useGetThreadId","isOpenedFromDraft","editingDraftId","pollOption","pollImport","pollForm","isFilled","option","dialogName","createPollLabel","isAnonymous","value","isMultipleAnswer","exportPollURI","exportPollFileName","deleteOption","index","addOption","handleSubmit","openPollDraftHandler","fromDrafts","draft","fillPollForm","triggerImport","importPoll","event","file","reader","e","parsedObject","error","createPollDraft","goBack","NcActions","NcActionButton","NcActionLink","NcIconSvgWrapper","NcTextField","Close","Plus","NcCheckboxRadioSwitch","pollEditorRef","showPollEditor","showPollDraftHandler","container","token","canCreatePollDrafts","participantType","type","PollEditor","PollDraftHandler","isInCall","useIsInCall","isGroupConversation","show","warningDescription","warningTitle","showInternalWarning","NcNoteCard"],"sourceRoot":""}